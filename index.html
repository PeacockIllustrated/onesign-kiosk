<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover, maximum-scale=1, user-scalable=no" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="theme-color" content="#111111">
  <link rel="manifest" href="./manifest.webmanifest">
  <link rel="apple-touch-icon" href="./assets/icons/icon-192.png">
  <title>Onesign Kiosk — Mobile Prototype (Monochrome)</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Inter', sans-serif; background:#fafafa; color:#111; }
    .panel { position:absolute; inset:0; transition:transform .3s ease-out; will-change:transform; }
    .tile-active { background:#111 !important; color:#fff !important; }
    html, body { height: 100%; }
  </style>
</head>
<body class="overflow-hidden" onload="(function(){ if('serviceWorker' in navigator){ navigator.serviceWorker.register('./sw.js').catch(()=>{}); } })()">
  <div id="viewport" class="relative w-screen h-screen overflow-hidden">

    <!-- Gate Panel -->
    <section id="gate" class="panel translate-x-0 flex flex-col items-center justify-center gap-8 p-8 bg-[#fafafa]">
      <h1 class="text-2xl font-semibold tracking-wider uppercase">Welcome to Onesign</h1>
      <div class="flex flex-col gap-6 w-full max-w-md">
        <button id="externalBtn" class="border-2 border-black rounded-2xl bg-white py-10 flex flex-col items-center justify-center transition-all duration-200 hover:shadow-xl active:scale-95">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-16 h-16 mb-4">
            <path stroke-linecap="round" stroke-linejoin="round" d="M3 12l9-9 9 9M4.5 10.5v9.75A1.5 1.5 0 006 21.75h12a1.5 1.5 0 001.5-1.5v-9.75" />
          </svg>
          <span class="text-xl font-medium">External Signs</span>
        </button>
        <button id="internalBtn" class="border-2 border-black rounded-2xl bg-white py-10 flex flex-col items-center justify-center transition-all duration-200 hover:shadow-xl active:scale-95">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-16 h-16 mb-4">
            <path stroke-linecap="round" stroke-linejoin="round" d="M3 4.5h18M3 9h18m-9 4.5h9m-9 4.5h9" />
          </svg>
          <span class="text-xl font-medium">Internal Signs</span>
        </button>
      </div>
      <div class="text-sm text-gray-500 mt-4">Tap to begin ▸</div>
    </section>

    <!-- Catalogue Panel -->
    <section id="catalogue" class="panel translate-x-full flex flex-col p-8 bg-[#fafafa]">
      <header class="mb-6 text-center">
        <h2 class="text-xl font-semibold uppercase tracking-wider">Select a Product Type</h2>
      </header>
      <div class="grid grid-cols-2 gap-6 max-w-md mx-auto w-full">
        <button id="lettersCard" class="border-2 border-black rounded-2xl bg-white aspect-square flex flex-col items-center justify-center gap-3 hover:shadow-xl transition-all">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-14 h-14">
            <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 19.5l7.5-15 7.5 15M6 16.5h12" />
          </svg>
          <span class="text-lg font-medium">Letters</span>
        </button>
        <button class="border-2 border-black rounded-2xl bg-white aspect-square flex flex-col items-center justify-center gap-3 hover:shadow-xl transition-all">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-14 h-14"><rect x="3" y="6" width="18" height="12" rx="2" /></svg>
          <span class="text-lg font-medium">Panel + Letters</span>
        </button>
        <button class="border-2 border-black rounded-2xl bg-white aspect-square flex flex-col items-center justify-center gap-3 hover:shadow-xl transition-all">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-14 h-14"><path stroke-linecap="round" stroke-linejoin="round" d="M3 6h18M3 12h18M3 18h18" /></svg>
          <span class="text-lg font-medium">Vinyl</span>
        </button>
        <button class="border-2 border-black rounded-2xl bg-white aspect-square flex flex-col items-center justify-center gap-3 hover:shadow-xl transition-all">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-14 h-14"><path stroke-linecap="round" stroke-linejoin="round" d="M12 3v18m-9-9h18" /></svg>
          <span class="text-lg font-medium">Neon</span>
        </button>
        <button class="border-2 border-black rounded-2xl bg-white aspect-square flex flex-col items-center justify-center gap-3 hover:shadow-xl transition-all">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-14 h-14"><rect x="5" y="5" width="14" height="14" rx="1.5" /></svg>
          <span class="text-lg font-medium">Window Decal</span>
        </button>
        <button class="border-2 border-black rounded-2xl bg-white aspect-square flex flex-col items-center justify-center gap-3 hover:shadow-xl transition-all">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-14 h-14"><path stroke-linecap="round" stroke-linejoin="round" d="M12 2v20M4 6h16M4 12h16M4 18h16" /></svg>
          <span class="text-lg font-medium">Wayfinding</span>
        </button>
        <button class="border-2 border-black rounded-2xl bg-white aspect-square flex flex-col items-center justify-center gap-3 hover:shadow-xl transition-all">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-14 h-14"><path stroke-linecap="round" stroke-linejoin="round" d="M3 6h18v12H3z" /><path stroke-linecap="round" stroke-linejoin="round" d="M6 9h12M6 15h12" /></svg>
          <span class="text-lg font-medium">Point of Sale</span>
        </button>
        <button class="border-2 border-black rounded-2xl bg-white aspect-square flex flex-col items-center justify-center gap-3 hover:shadow-xl transition-all">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-14 h-14"><rect x="4" y="8" width="16" height="8" rx="1.5" /></svg>
          <span class="text-lg font-medium">Internal Wall Signs</span>
        </button>
      </div>
      <div class="absolute bottom-6 left-0 right-0 flex items-center justify-center gap-10">
        <button id="backFromCatalogue" aria-label="Back" class="border-2 border-black rounded-full w-12 h-12 flex items-center justify-center hover:bg-black hover:text-white transition">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M15 18l-6-6 6-6"/></svg>
        </button>
      </div>
    </section>

    <!-- Letters Panel -->
    <section id="letters" class="panel translate-x-full bg-[#fafafa]">
      <div class="absolute inset-0">
        <div id="lwrap" class="absolute inset-0 pt-6 flex w-[700vw] h-[calc(100%-3.5rem)] transition-transform duration-300 ease-out">

          <!-- 1. Material -->
          <section class="w-screen h-full px-8 pb-20 flex flex-col">
            <h2 class="text-xl font-semibold uppercase tracking-wider text-center mb-4">Letter Material</h2>
            <div class="grid grid-cols-2 gap-6 max-w-md mx-auto w-full">
              <button class="border-2 border-black rounded-2xl bg-white aspect-square flex items-center justify-center text-center hover:shadow-xl transition-all active:scale-95 focus:outline-none focus:ring-2 focus:ring-black/50 px-4" data-choice="material" data-value="MDF">MDF</button>
              <button class="border-2 border-black rounded-2xl bg-white aspect-square flex items-center justify-center text-center hover:shadow-xl transition-all active:scale-95 focus:outline-none focus:ring-2 focus:ring-black/50 px-4" data-choice="material" data-value="Acrylic">Acrylic</button>
              <button class="border-2 border-black rounded-2xl bg-white aspect-square flex items-center justify-center text-center hover:shadow-xl transition-all active:scale-95 focus:outline-none focus:ring-2 focus:ring-black/50 px-4" data-choice="material" data-value="Metal">Metal</button>
              <button class="border-2 border-black rounded-2xl bg-white aspect-square flex items-center justify-center text-center hover:shadow-xl transition-all active:scale-95 focus:outline-none focus:ring-2 focus:ring-black/50 px-4" data-choice="material" data-value="Foamex">Foamex</button>
            </div>
          </section>

          <!-- 2. Height -->
          <section class="w-screen h-full px-8 pb-20 flex flex-col">
            <h2 class="text-xl font-semibold uppercase tracking-wider text-center mb-4">Letter Height</h2>
            <div class="grid grid-cols-2 gap-6 max-w-md mx-auto w-full">
              <button class="border-2 border-black rounded-2xl bg-white aspect-square flex items-center justify-center text-center hover:shadow-xl transition-all active:scale-95 focus:outline-none focus:ring-2 focus:ring-black/50 px-4" data-choice="height" data-value="Small (10mm)">Small<br/>(10mm)</button>
              <button class="border-2 border-black rounded-2xl bg-white aspect-square flex items-center justify-center text-center hover:shadow-xl transition-all active:scale-95 focus:outline-none focus:ring-2 focus:ring-black/50 px-4" data-choice="height" data-value="Medium (25mm)">Medium<br/>(25mm)</button>
              <button class="border-2 border-black rounded-2xl bg-white aspect-square flex items-center justify-center text-center hover:shadow-xl transition-all active:scale-95 focus:outline-none focus:ring-2 focus:ring-black/50 px-4" data-choice="height" data-value="Large (50mm)">Large<br/>(50mm)</button>
              <button class="border-2 border-black rounded-2xl bg-white aspect-square flex items-center justify-center text-center hover:shadow-xl transition-all active:scale-95 focus:outline-none focus:ring-2 focus:ring-black/50 px-4" data-choice="height" data-value="XL (75mm)">XL<br/>(75mm)</button>
              <div class="col-span-2 grid grid-cols-2 gap-6">
                <button class="border-2 border-black rounded-2xl bg-white aspect-square flex items-center justify-center text-center hover:shadow-xl transition-all active:scale-95 focus:outline-none focus:ring-2 focus:ring-black/50 px-4" data-choice="height" data-value="Custom">Custom</button>
                <div class="border-2 border-black rounded-2xl bg-white aspect-square flex items-center justify-center">
                  <input id="heightCustom" type="number" min="5" placeholder="mm" class="w-20 text-center border border-black/20 rounded-lg py-2">
                </div>
              </div>
            </div>
          </section>

          <!-- 3. Illumination Type -->
          <section class="w-screen h-full px-8 pb-20 flex flex-col">
            <h2 class="text-xl font-semibold uppercase tracking-wider text-center mb-4">Letter Illumination</h2>
            <div class="grid grid-cols-2 gap-6 max-w-md mx-auto w-full">
              <button class="border-2 border-black rounded-2xl bg-white aspect-square flex items-center justify-center text-center hover:shadow-xl transition-all active:scale-95 focus:outline-none focus:ring-2 focus:ring-black/50 px-4" data-choice="illumination" data-value="Face illuminated">Face</button>
              <button class="border-2 border-black rounded-2xl bg-white aspect-square flex items-center justify-center text-center hover:shadow-xl transition-all active:scale-95 focus:outline-none focus:ring-2 focus:ring-black/50 px-4" data-choice="illumination" data-value="Edge illuminated">Edge</button>
              <button class="border-2 border-black rounded-2xl bg-white aspect-square flex items-center justify-center text-center hover:shadow-xl transition-all active:scale-95 focus:outline-none focus:ring-2 focus:ring-black/50 px-4" data-choice="illumination" data-value="Halo illuminated">Halo</button>
              <button class="border-2 border-black rounded-2xl bg-white aspect-square flex items-center justify-center text-center hover:shadow-xl transition-all active:scale-95 focus:outline-none focus:ring-2 focus:ring-black/50 px-4" data-choice="illumination" data-value="No Illumination">None</button>
            </div>
          </section>

          <!-- 4. Illumination Colour -->
          <section class="w-screen h-full px-8 pb-20 flex flex-col">
            <h2 class="text-xl font-semibold uppercase tracking-wider text-center mb-4">Illumination Colour</h2>
            <div class="grid grid-cols-2 gap-6 max-w-md mx-auto w-full">
              <button class="border-2 border-black rounded-2xl bg-white aspect-square flex items-center justify-center text-center hover:shadow-xl transition-all active:scale-95 focus:outline-none focus:ring-2 focus:ring-black/50 px-4" data-choice="illuminationColour" data-value="Bright white">Bright</button>
              <button class="border-2 border-black rounded-2xl bg-white aspect-square flex items-center justify-center text-center hover:shadow-xl transition-all active:scale-95 focus:outline-none focus:ring-2 focus:ring-black/50 px-4" data-choice="illuminationColour" data-value="Warm white">Warm</button>
              <button class="border-2 border-black rounded-2xl bg-white aspect-square flex items-center justify-center text-center hover:shadow-xl transition-all active:scale-95 focus:outline-none focus:ring-2 focus:ring-black/50 px-4" data-choice="illuminationColour" data-value="RGB">RGB</button>
            </div>
          </section>

          <!-- 5. Fixing -->
          <section class="w-screen h-full px-8 pb-20 flex flex-col">
            <h2 class="text-xl font-semibold uppercase tracking-wider text-center mb-4">Fixing Method</h2>
            <div class="grid grid-cols-2 gap-6 max-w-md mx-auto w-full">
              <button class="border-2 border-black rounded-2xl bg-white aspect-square flex items-center justify-center text-center hover:shadow-xl transition-all active:scale-95 focus:outline-none focus:ring-2 focus:ring-black/50 px-4" data-choice="fixing" data-value="Direct to wall">Direct</button>
              <button class="border-2 border-black rounded-2xl bg-white aspect-square flex items-center justify-center text-center hover:shadow-xl transition-all active:scale-95 focus:outline-none focus:ring-2 focus:ring-black/50 px-4" data-choice="fixing" data-value="Aluminium wall spacers">Spacers</button>
            </div>
          </section>

          <!-- 6. Installation -->
          <section class="w-screen h-full px-8 pb-20 flex flex-col">
            <h2 class="text-xl font-semibold uppercase tracking-wider text-center mb-4">Installation</h2>
            <div id="installGrid" class="grid grid-cols-2 gap-6 max-w-md mx-auto w-full">
              <button class="border-2 border-black rounded-2xl bg-white aspect-square flex items-center justify-center text-center hover:shadow-xl transition-all active:scale-95 focus:outline-none focus:ring-2 focus:ring-black/50 px-4" data-choice="install" data-value="Yes">Install</button>
              <button class="border-2 border-black rounded-2xl bg-white aspect-square flex items-center justify-center text-center hover:shadow-xl transition-all active:scale-95 focus:outline-none focus:ring-2 focus:ring-black/50 px-4" data-choice="install" data-value="Delivery with installation layout (+£35)">Layout +£35</button>
              <button class="border-2 border-black rounded-2xl bg-white aspect-square flex items-center justify-center text-center hover:shadow-xl transition-all active:scale-95 focus:outline-none focus:ring-2 focus:ring-black/50 px-4 col-span-2" data-choice="install" data-value="Delivery">Delivery</button>
            </div>
          </section>

          <!-- 7. Contact -->
          <section class="w-screen h-full px-8 pb-20 flex flex-col">
            <h2 class="text-xl font-semibold uppercase tracking-wider text-center mb-4">Contact</h2>
            <div class="grid grid-cols-2 gap-6 max-w-md mx-auto w-full">
              <div class="border-2 border-black rounded-2xl bg-white aspect-square flex items-center justify-center"><input id="email" type="email" placeholder="Email" class="w-[80%] text-center border border-black/20 rounded-lg py-2"></div>
              <div class="border-2 border-black rounded-2xl bg-white aspect-square flex items-center justify-center"><input id="postcode" type="text" placeholder="Postcode" class="w-[70%] text-center border border-black/20 rounded-lg py-2"></div>
            </div>
          </section>

        </div>

        <!-- bottom nav arrows -->
        <div class="absolute bottom-6 left-0 right-0 flex items-center justify-center gap-10">
          <button id="lettersBack" aria-label="Previous" class="border-2 border-black rounded-full w-12 h-12 flex items-center justify-center hover:bg-black hover:text-white transition">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M15 18l-6-6 6-6"/></svg>
          </button>
          <button id="lettersNext" aria-label="Next" class="border-2 border-black rounded-full w-12 h-12 flex items-center justify-center hover:bg-black hover:text-white transition">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M9 6l6 6-6 6"/></svg>
          </button>
        </div>

        <!-- Bottom Summary Sheet -->
        <div id="sheetWrap" class="pointer-events-none fixed inset-0 flex items-end justify-center">
          <div id="sheetBackdrop" class="opacity-0 transition-opacity duration-200 ease-out bg-black/30 absolute inset-0"></div>
          <div id="sheet" class="translate-y-full transition-transform duration-300 ease-out relative z-10 w-full max-w-md mx-auto bg-white border-t-2 border-black rounded-t-2xl p-6">
            <h3 class="text-lg font-semibold mb-4">Summary</h3>
            <div id="summary" class="text-sm space-y-2 mb-6"></div>
            <div class="grid grid-cols-2 gap-3">
              <button id="closeSheet" class="border border-black rounded-full px-4 py-2 text-sm tracking-wide hover:bg-black hover:text-white transition">Edit</button>
              <button class="border border-black rounded-full px-4 py-2 text-sm tracking-wide hover:bg-black hover:text-white transition">Send</button>
            </div>
          </div>
        </div>
      </div>
    </section>

  </div>

  <script>
    // PANEL NAV
    const gate = document.getElementById('gate');
    const catalogue = document.getElementById('catalogue');
    const letters = document.getElementById('letters');

    const internalBtn = document.getElementById('internalBtn');
    const externalBtn = document.getElementById('externalBtn');
    const backFromCatalogue = document.getElementById('backFromCatalogue');
    const lettersCard = document.getElementById('lettersCard');

    function show(el){ el.classList.remove('translate-x-full','-translate-x-full'); el.classList.add('translate-x-0'); }
    function hideLeft(el){ el.classList.remove('translate-x-0','translate-x-full'); el.classList.add('-translate-x-full'); }
    function hideRight(el){ el.classList.remove('translate-x-0','-translate-x-full'); el.classList.add('translate-x-full'); }

    internalBtn.addEventListener('click', ()=>{ hideLeft(gate); show(catalogue); });
    externalBtn.addEventListener('click', ()=>{ hideLeft(gate); show(catalogue); });
    backFromCatalogue.addEventListener('click', ()=>{ hideRight(catalogue); show(gate); });
    lettersCard.addEventListener('click', ()=>{ hideLeft(catalogue); show(letters); go(0); });

    // LETTERS FLOW
    const L = { material:null, height:null, heightCustom:null, illumination:null, illuminationColour:null, fixing:null, install:null, email:'', postcode:'' };
    const lwrap = document.getElementById('lwrap');
    const lettersBack = document.getElementById('lettersBack');
    const lettersNext = document.getElementById('lettersNext');

    let step = 0; // 0..6
    const TOTAL = 7;

    function clamp(n, min, max){ return Math.max(min, Math.min(max, n)); }
    function go(n){
      step = clamp(n, 0, TOTAL-1);
      lwrap.style.transform = `translateX(-${step*100}vw)`;
      enforceInstallRules();
      updateSummary();
    }

    function setActive(group, value){
      document.querySelectorAll(`[data-choice="${group}"]`).forEach(el=>{
        const active = el.dataset.value === value;
        el.classList.toggle('tile-active', active);
      });
    }

    document.querySelectorAll('[data-choice]').forEach(btn=>{
      btn.addEventListener('click', ()=>{
        const g = btn.dataset.choice; const v = btn.dataset.value;
        if(g==='material') L.material=v;
        if(g==='height') { L.height=v; if(v!=='Custom'){ L.heightCustom=null; const hc=document.getElementById('heightCustom'); if(hc) hc.value=''; } }
        if(g==='illumination'){ L.illumination=v; if(v==='No Illumination'){ L.illuminationColour=null; } }
        if(g==='illuminationColour') L.illuminationColour=v;
        if(g==='fixing') L.fixing=v;
        if(g==='install') L.install=v;
        setActive(g,v);
        enforceInstallRules();
        updateSummary();
      });
    });

    const heightCustomInput = document.getElementById('heightCustom');
    if(heightCustomInput){
      heightCustomInput.addEventListener('input', e=>{
        const mm = Number(e.target.value||0);
        if(mm>0){ L.height='Custom'; L.heightCustom=mm; setActive('height','Custom'); updateSummary(); }
      });
    }

    function enforceInstallRules(){
      const grid=document.getElementById('installGrid'); if(!grid) return;
      const btns=[...grid.querySelectorAll('[data-choice="install"]')];
      const needsInstall = L.fixing==='Aluminium wall spacers';
      btns.forEach(b=>{
        const isInstall = b.dataset.value==='Yes';
        if(needsInstall && !isInstall){ b.disabled=true; b.classList.add('opacity-50','cursor-not-allowed'); }
        else { b.disabled=false; b.classList.remove('opacity-50','cursor-not-allowed'); }
      });
      if(needsInstall){ L.install='Yes'; setActive('install','Yes'); }
    }

    function computeNextStep(cur){
      if(cur===2 && (L.illumination==='No Illumination' || L.material==='Foamex')){ return 4; }
      return clamp(cur+1, 0, TOTAL-1);
    }

    lettersBack.addEventListener('click', ()=>{
      if(step===0){ hideRight(letters); show(catalogue); } else { go(step-1); }
    });

    lettersNext.addEventListener('click', ()=>{
      if(step===6){ openSummary(); }
      else { go(computeNextStep(step)); }
    });

    // SUMMARY SHEET
    const sheetWrap=document.getElementById('sheetWrap');
    const sheet=document.getElementById('sheet');
    const sheetBackdrop=document.getElementById('sheetBackdrop');
    const closeSheet=document.getElementById('closeSheet');
    const summaryBox=document.getElementById('summary');

    function updateSummary(){
      const h=L.height==='Custom'&&L.heightCustom?`Custom (${L.heightCustom}mm)`: (L.height||'—');
      const rows=[
        ['Material', L.material||'—'],
        ['Height', h],
        ['Illumination', L.material==='Foamex' ? '—' : (L.illumination||'—')],
        ['Colour', (L.illumination && L.illumination!=='No Illumination' && L.material!=='Foamex') ? (L.illuminationColour||'—') : '—'],
        ['Fixing', L.fixing||'—'],
        ['Install', L.install||'—'],
        ['Email', L.email||'—'],
        ['Postcode', L.postcode||'—']
      ];
      summaryBox.innerHTML = rows.map(([k,v])=>`<div class='flex items-center justify-between border-b border-black/10 py-2'><span class='text-gray-600'>${k}</span><span class='font-medium'>${v}</span></div>`).join('');
    }

    function openSummary(){ sheetWrap.classList.remove('pointer-events-none'); sheetBackdrop.classList.remove('opacity-0'); sheet.classList.remove('translate-y-full'); }
    function closeSummary(){ sheetWrap.classList.add('pointer-events-none'); sheetBackdrop.classList.add('opacity-0'); sheet.classList.add('translate-y-full'); }

    closeSheet.addEventListener('click', closeSummary);
    sheetBackdrop.addEventListener('click', closeSummary);

    const emailInput=document.getElementById('email');
    const pcInput=document.getElementById('postcode');
    if(emailInput){ emailInput.addEventListener('input', e=>{ L.email=e.target.value; updateSummary(); }); }
    if(pcInput){ pcInput.addEventListener('input', e=>{ L.postcode=e.target.value; updateSummary(); }); }

    // INIT
    go(0);

    // BASIC TESTS (console)
    (function runTests(){
      console.group('%cOnesign Kiosk Tests','color:#111;background:#eee;padding:2px 6px;border-radius:6px');
      console.assert(computeNextStep(2)===3 || computeNextStep(2)===4, 'Next step from 2 should be 3 or 4 based on illumination.');
      const savedIll=L.illumination, savedMat=L.material;
      L.illumination='No Illumination'; L.material='MDF';
      console.assert(computeNextStep(2)===4, 'When No Illumination, colour slide must be skipped.');
      L.illumination=savedIll; L.material='Foamex';
      console.assert(computeNextStep(2)===4, 'When Foamex, colour slide must be skipped.');
      console.assert(clamp(-5,0,6)===0 && clamp(99,0,6)===6, 'Clamp should bound values.');
      L.material=savedMat;
      console.groupEnd();
    })();
  </script>
</body>
</html>
